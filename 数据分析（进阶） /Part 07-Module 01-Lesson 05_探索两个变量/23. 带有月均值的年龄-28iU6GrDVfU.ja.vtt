WEBVTT
Kind: captions
Language: ja

00:00:00.400 --> 00:00:04.500
今回の目的は
fc＿by＿ageに似たデータフレームの作成です

00:00:04.500 --> 00:00:05.930
年齢ごとではなく

00:00:05.930 --> 00:00:09.120
年齢と月数ごとの友達数を見たいからです

00:00:09.120 --> 00:00:13.420
ここではdplyr演算子をつなぐ方法でやります

00:00:13.420 --> 00:00:18.060
まず最初にライブラリが読み込まれていることを確認し

00:00:18.060 --> 00:00:21.480
pf．fc＿by＿age＿monthsデータフレームを作成します

00:00:21.480 --> 00:00:23.480
次に元のデータフレームに

00:00:23.480 --> 00:00:26.403
dplyrパッケージから多数の関数を適用します

00:00:26.403 --> 00:00:29.570
まず年齢と月数ごとにグループ分けし

00:00:29.570 --> 00:00:31.940
新コマンドのsummariseを与えます

00:00:31.940 --> 00:00:35.000
ここでは友達数の平均値と中央値、

00:00:35.000 --> 00:00:37.680
グループごとのユーザ数を要約します

00:00:37.680 --> 00:00:42.720
その後データフレームを
年齢と月数でアレンジするコマンドをつなげます

00:00:42.720 --> 00:00:45.820
コマンドの実行で新しいデータフレームができます

00:00:45.820 --> 00:00:47.920
観測結果が増えていますね

00:00:47.920 --> 00:00:51.970
年齢から年齢と月数にしたので当然です

00:00:51.970 --> 00:00:55.720
データフレームの数行を出力し確認しましょう

00:00:55.720 --> 00:00:59.190
年齢と月数、友達数の平均値、

00:00:59.190 --> 00:01:04.459
中央値、nすなわち各グループのユーザ数があります

00:01:04.459 --> 00:01:06.460
実はもう1つ別の方法があるので

00:01:06.460 --> 00:01:08.460
そちらも見ていきましょう

00:01:08.460 --> 00:01:12.400
コマンドをつなげる代わりにデータフレームを使い

00:01:12.400 --> 00:01:17.020
コマンドを実行します
まずage＿with＿month．groupsを入力します

00:01:17.020 --> 00:01:18.700
コマンドはgroup＿byを使います

00:01:18.700 --> 00:01:24.720
データフレームにつなぎage＿with＿monthsで
グループ分けします　これが変数です

00:01:24.720 --> 00:01:26.740
グループができたところで

00:01:26.740 --> 00:01:29.060
友達数の平均値、中央値、

00:01:29.060 --> 00:01:32.080
各グループのユーザ数nを使って要約します

00:01:32.080 --> 00:01:36.700
ここでage＿with＿monthを要約し
新しい変数の中に保存します

00:01:36.700 --> 00:01:40.480
グループができたのでsummariseコマンドで要約します

00:01:40.480 --> 00:01:45.430
次に新しいデータフレーム
pf．fc＿by＿age＿months2を作成し

00:01:45.430 --> 00:01:48.040
データフレームを要約していきます

00:01:48.040 --> 00:01:52.280
ここにつなぎage＿with＿monthsグループとします

00:01:52.280 --> 00:01:54.942
あとは要約したい変数を追加するだけです

00:01:54.942 --> 00:01:57.710
友達数の平均値算出はこれを変数に保存し

00:01:57.710 --> 00:02:00.940
友達数の中央値はこれを変数に保存します

00:02:00.940 --> 00:02:04.040
最後に各グループのユーザ数を出します

00:02:04.040 --> 00:02:05.780
このデータフレームを

00:02:05.780 --> 00:02:08.919
age＿with＿monthsを使ってアレンジします

00:02:08.919 --> 00:02:12.120
データフレームをarrange関数につなぎ

00:02:12.120 --> 00:02:15.220
年齢と月数でアレンジするよう指示します

00:02:15.220 --> 00:02:18.160
新しいデータフレームを上から書いて

00:02:18.160 --> 00:02:21.170
古いデータフレームの中に保存しています

00:02:21.170 --> 00:02:24.910
コードを実行すると新しいデータフレームが見えます

00:02:24.910 --> 00:02:26.450
head関数で確認もできます

00:02:26.450 --> 00:02:30.150
まったく同じデータフレームができましたね

