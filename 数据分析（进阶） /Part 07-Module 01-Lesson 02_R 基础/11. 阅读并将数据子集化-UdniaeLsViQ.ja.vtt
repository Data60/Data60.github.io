WEBVTT
Kind: captions
Language: ja

00:00:00.210 --> 00:00:02.900
このあとの3回のレッスンではFacebookの

00:00:02.900 --> 00:00:06.560
ユーザアクティビティのようなデータ集合を
詳しく見ていきます

00:00:06.560 --> 00:00:09.150
その前にRに含まれていないデータの読み方と

00:00:09.150 --> 00:00:12.000
どのようにデータの部分集合を作るかお話しします

00:00:12.000 --> 00:00:15.000
すべてのデータが
mtcarsのデータ集合のように簡単に

00:00:15.000 --> 00:00:18.170
読み込めるわけではありません
新しいデータ集合のダウンロードの方法は

00:00:18.170 --> 00:00:20.630
インストラクターノートのリンクで確認してください

00:00:20.630 --> 00:00:24.280
このデータ集合は
アメリカ50州の情報を含んでいます

00:00:24.280 --> 00:00:28.750
ほとんどのデータは1970年頃のものです
このデータを見ていく前に

00:00:28.750 --> 00:00:31.800
作業ディレクトリを設定する必要があります

00:00:31.800 --> 00:00:35.240
現在のディレクトリを確認するために
getwdと入力してください

00:00:35.240 --> 00:00:38.300
このコマンドを実行すると
コンソールに出力されます

00:00:38.300 --> 00:00:40.780
どうやらすでにDownloadsという名前のフォルダに
設定されているようです

00:00:40.780 --> 00:00:43.730
コンソールの上にも現れます

00:00:43.730 --> 00:00:46.870
この場合ディレクトリを変更する必要はありませんが

00:00:46.870 --> 00:00:50.300
変更の必要があればsetwdと入力してください

00:00:50.300 --> 00:00:52.510
これで行きたいディレクトリの
ファイルパスにつながります

00:00:52.510 --> 00:00:55.970
データ集合はおそらく
Downloadsファイルにあると思います

00:00:55.970 --> 00:00:58.670
なのでこのコマンドを実行します

00:00:58.670 --> 00:01:01.460
大切なポイントは使用しているコンピュータが

00:01:01.460 --> 00:01:05.450
MacでもWindowsでもパスを書く時は
フォルダ名をスラッシュで区切らなければなりません

00:01:05.450 --> 00:01:08.780
そして必ずパスの前後は
クォーテーションマークで囲んでください

00:01:08.780 --> 00:01:11.894
データを読み込むためにread．csvコマンドを使います

00:01:11.894 --> 00:01:15.780
このコマンドでファイル名を取り出せます

00:01:15.780 --> 00:01:18.800
ここでstatesInfoという
名前のデータを取り込みます

00:01:18.800 --> 00:01:22.800
statesInfoはデータをデータフレームとして保存します

00:01:22.800 --> 00:01:24.560
このコードを実行すると

00:01:24.560 --> 00:01:27.940
statesInfoがEnvironmentに現れます

00:01:27.940 --> 00:01:30.230
ワークスペース上で
データフレームをダブルクリックすると

00:01:30.230 --> 00:01:33.530
RStudioで数値の表が確認できます

00:01:33.530 --> 00:01:37.840
例えば北東部の州の情報だけ収集したいとしましょう

00:01:37.840 --> 00:01:42.030
コネチカット州など北東部の州は地域1になります

00:01:42.030 --> 00:01:46.760
R scriptに戻って
そのデータを収集するコマンドを入力します

00:01:46.760 --> 00:01:50.130
subsetコマンドはこのように記述します

00:01:50.130 --> 00:01:53.630
これでstatesInfoというデータフレームを
subset関数に渡し

00:01:53.630 --> 00:01:57.000
地域1である州のデータを抽出します

00:01:57.000 --> 00:02:00.210
コードを実行すると下に出力されます

00:02:00.210 --> 00:02:02.970
コネチカット州やメイン州
他にも多くの州があります

00:02:02.970 --> 00:02:06.780
他にもう1つこのデータフレームの
部分集合を作る方法があります

00:02:06.780 --> 00:02:08.570
本当はお見せしたくなかったのですが

00:02:08.570 --> 00:02:12.130
あとで混乱しないよう説明しておきます
角括弧による記法を用います

00:02:12.130 --> 00:02:15.900
データ集合の名前のあとに
2つの角括弧を記述し

00:02:15.900 --> 00:02:17.460
その間にカンマを書きます

00:02:17.460 --> 00:02:21.630
最初の部分には残したいデータ集合の
行を入力します

00:02:21.630 --> 00:02:25.000
2つ目の部分に残したい列を入力します

00:02:25.000 --> 00:02:28.250
北東部の州だけが必要であれば
このようにコードを書きます

00:02:28.250 --> 00:02:33.000
データ集合の名前はstateInfoで
地域1である州のデータ行を指定します

00:02:33.000 --> 00:02:35.500
ここにただstate．regionと書いてはダメで

00:02:35.500 --> 00:02:37.520
実際の変数にアクセスする必要があります

00:02:37.520 --> 00:02:39.760
そこでデータ集合名statesInfoと
ドルマークを書きます

00:02:39.760 --> 00:02:43.680
これで変数値が与えられますので
地域＝1になっているか確認します

00:02:43.680 --> 00:02:46.690
地域1であることが確認できたら
すべての列をデータフレームに

00:02:46.690 --> 00:02:51.040
残していきます
例えばコネチカットが地域1であれば

00:02:51.040 --> 00:02:54.030
この1行における列のすべてを残します

00:02:54.030 --> 00:02:57.750
列をすべて残すにはここを空白のままにしておきます

00:02:57.750 --> 00:03:00.750
このコードで地域1の州を探し

00:03:00.750 --> 00:03:03.910
それらの行にあるすべてのデータ列を収集できます

00:03:03.910 --> 00:03:06.800
そして新しいデータフレームとして
コンソールに送られます

00:03:06.800 --> 00:03:09.750
しかしコンソール上に
この出力結果を表示させるだけでは

00:03:09.750 --> 00:03:11.930
あまり役に立たないかもしれません

00:03:11.930 --> 00:03:15.990
そこでこの部分集合を新しい変数として保存します
それぞれのデータフレームの

00:03:15.990 --> 00:03:18.760
最初の2行と次元を
表示する関数も加えておきましょう

00:03:18.760 --> 00:03:23.110
先ほどのデータ集合と
まったく同じものであると納得いただけましたか

00:03:23.110 --> 00:03:26.710
これら2つの例で
一番気をつけて見てほしいのが構文です

00:03:26.710 --> 00:03:29.870
このコースを通して
subsetコマンドを使用することが多いですが

00:03:29.870 --> 00:03:32.940
これを使う場合もあるかもしれません

00:03:32.940 --> 00:03:36.390
どちらの方法も同じ結果を
生み出すということを覚えておいてください

00:03:36.390 --> 00:03:38.890
それではこのデータフレームを使って

00:03:38.890 --> 00:03:41.270
他の地域についての部分集合を
作ってみてください

00:03:41.270 --> 00:03:44.920
非識字率が0．5%の州はどの州か

00:03:44.920 --> 00:03:48.430
高校卒業率が50%以上の州はどこかなども
調べることができます

00:03:48.430 --> 00:03:50.500
自由に遊んでみてください

