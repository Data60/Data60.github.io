WEBVTT
Kind: captions
Language: ja

00:00:00.290 --> 00:00:02.710
準備ができたらデータフレームを

00:00:02.710 --> 00:00:06.590
新しいものに再形成するコードを見ていきましょう

00:00:06.590 --> 00:00:10.340
まずはreshape2パッケージをインストールして
Rに読み込み

00:00:10.340 --> 00:00:13.300
ワイドフォーマットに入る
新しいデータ集合の変数を作ります

00:00:13.300 --> 00:00:16.780
データフレームには同じ名前の変数を使い
最後に．wideと付けます

00:00:16.780 --> 00:00:18.760
ここではreshape2パッケージ付属の

00:00:18.760 --> 00:00:21.480
dcast関数を活用します

00:00:21.480 --> 00:00:25.760
結果をデータフレームにするので
dという文字が使われています

00:00:25.760 --> 00:00:28.250
配列や行列にするならacastを使います

00:00:28.250 --> 00:00:31.890
変更するデータ集合を明示して構文に入れます

00:00:31.890 --> 00:00:34.820
これが修正したいデータフレームで

00:00:34.820 --> 00:00:38.030
ここが構文を入力する場所です

00:00:38.030 --> 00:00:41.200
構文の最初の部分つまり～の左側には

00:00:41.200 --> 00:00:45.070
間に＋サインを入れて
キープしたい変数のリストを入力します

00:00:45.070 --> 00:00:48.050
ここではageだけをキープします

00:00:48.050 --> 00:00:50.280
～の右側にはgenderの変数を入れます

00:00:50.280 --> 00:00:54.430
データフレームの男女それぞれの列に
友達数の中央値を入れるからです

00:00:54.430 --> 00:00:58.180
最後にvalue．var＝median＿friend＿countsと
設定します

00:00:58.180 --> 00:01:02.360
value．varが新しいデータフレームのカギとなる測定値

00:01:02.360 --> 00:01:05.019
もしくはそれらの値を保持するからです

00:01:05.019 --> 00:01:07.900
この変数の周りに引用符を忘れたので足します

00:01:07.900 --> 00:01:11.210
これで新しいデータフレームができるはずです

00:01:11.210 --> 00:01:13.020
dcast関数を理解できたか

00:01:13.020 --> 00:01:16.590
確認するためデータフレームを見ていきましょう

00:01:16.590 --> 00:01:20.970
いくつか行を表示してみると
年齢、女性の友達数の中央値、

00:01:20.970 --> 00:01:22.840
男性の友達数の中央値が確認できます

00:01:22.840 --> 00:01:25.380
これを再現できるか試しましょう

00:01:25.380 --> 00:01:29.640
dcast、melt関数、reshape2パッケージを
いじってみてください

00:01:29.640 --> 00:01:31.430
melt関数はワイドデータを

00:01:31.430 --> 00:01:34.210
元のロングデータに戻す変換ができます

