<!-- udacimak v1.3.0 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Python 中的文本文件
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      收集数据
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. 简介.html">
       01. 简介
      </a>
     </li>
     <li class="">
      <a href="02. 课程大纲.html">
       02. 课程大纲
      </a>
     </li>
     <li class="">
      <a href="03. 数据集：寻找最好的电影.html">
       03. 数据集：寻找最好的电影
      </a>
     </li>
     <li class="">
      <a href="04. 浏览工作目录和文件 IO.html">
       04. 浏览工作目录和文件 I/O
      </a>
     </li>
     <li class="">
      <a href="05. 资料来源：手头文件.html">
       05. 资料来源：手头文件
      </a>
     </li>
     <li class="">
      <a href="06. 平面文件结构.html">
       06. 平面文件结构
      </a>
     </li>
     <li class="">
      <a href="07. Python 中的平面文件.html">
       07. Python 中的平面文件
      </a>
     </li>
     <li class="">
      <a href="08. 资料来源：Web 数据抓取.html">
       08. 资料来源：Web 数据抓取
      </a>
     </li>
     <li class="">
      <a href="09. HTML 文件结构.html">
       09. HTML 文件结构
      </a>
     </li>
     <li class="">
      <a href="10.  Python 中的 HTML 文件.html">
       10.  Python 中的 HTML 文件
      </a>
     </li>
     <li class="">
      <a href="11. Flashforward 1.html">
       11. Flashforward 1
      </a>
     </li>
     <li class="">
      <a href="12. 资料来源：从互联网下载文件.html">
       12. 资料来源：从互联网下载文件
      </a>
     </li>
     <li class="">
      <a href="13. 文本文件结构.html">
       13. 文本文件结构
      </a>
     </li>
     <li class="">
      <a href="14. Python 中的文本文件.html">
       14. Python 中的文本文件
      </a>
     </li>
     <li class="">
      <a href="15. 资料来源：API(应用程序编程接口).html">
       15. 资料来源：API(应用程序编程接口)
      </a>
     </li>
     <li class="">
      <a href="16. JSON 文件结构.html">
       16. JSON 文件结构
      </a>
     </li>
     <li class="">
      <a href="17. Python 中的 JSON 文件.html">
       17. Python 中的 JSON 文件
      </a>
     </li>
     <li class="">
      <a href="18. 混搭：API、以编程方式下载文件、JSON.html">
       18. 混搭：API、以编程方式下载文件、JSON
      </a>
     </li>
     <li class="">
      <a href="19. Flashforward 2.html">
       19. Flashforward 2
      </a>
     </li>
     <li class="">
      <a href="20. 存储数据.html">
       20. 存储数据
      </a>
     </li>
     <li class="">
      <a href="21. 关系数据库结构.html">
       21. 关系数据库结构
      </a>
     </li>
     <li class="">
      <a href="22. Python 中的关系数据库.html">
       22. Python 中的关系数据库
      </a>
     </li>
     <li class="">
      <a href="23. 其他文件格式.html">
       23. 其他文件格式
      </a>
     </li>
     <li class="">
      <a href="24. 你可以迭代.html">
       24. 你可以迭代
      </a>
     </li>
     <li class="">
      <a href="25. 收集：总结.html">
       25. 收集：总结
      </a>
     </li>
     <li class="">
      <a href="26. 总结.html">
       26. 总结
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          14. Python 中的文本文件
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="python-中的文本文件">
          Python 中的文本文件
         </h2>
         <p>
          下面视频的前两分钟主要介绍了
          <a href="https://docs.python.org/3/library/glob.html" target="_blank">
           glob
          </a>
          库，这使采用类似的路径结构打开文件(就像我们的 Roger Ebert 影评文本文件文件夹一样)变得非常简单。
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Python 中的文本文件 1
         </p>
        </h3>
        <video controls="">
         <source src="14. Python 中的文本文件 1-nDWAZOU3W3U.mp4" type="video/mp4"/>
         <track default="false" kind="subtitles" label="zh-CN" src="14. Python 中的文本文件 1-nDWAZOU3W3U.zh-CN.vtt" srclang="zh-CN"/>
         <track default="false" kind="subtitles" label="ar" src="14. Python 中的文本文件 1-nDWAZOU3W3U.ar.vtt" srclang="ar"/>
         <track default="false" kind="subtitles" label="pt-BR" src="14. Python 中的文本文件 1-nDWAZOU3W3U.pt-BR.vtt" srclang="pt-BR"/>
         <track default="true" kind="subtitles" label="en" src="14. Python 中的文本文件 1-nDWAZOU3W3U.en.vtt" srclang="en"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="练习">
          练习
         </h2>
         <p>
          所以我们使用 88 Roger Ebert 影评打开和阅读，你可以在* ebert_reviews *文件夹下面的 Jupyter Notebook 仪表板中看到(单击左上角的 *jupyter* 就可以访问仪表盘)。如果想在 Udacity 课程结束后操作，单击
          <a href="https://d17h27t6h515a5.cloudfront.net/topher/2017/September/59ca9db1_ebert-reviews/ebert-reviews.zip" target="_blank">
           此链接
          </a>
          下载压缩文件夹。
         </p>
         <p>
          为了打开和读取每个文件，我们需要循环遍历这个文件夹中的所有文件，然后将我们需要的文本位提取为单独的数据：
         </p>
         <ul>
          <li>
           第一行也称为电影标题(合并到主数据集)
          </li>
          <li>
           第二行也就是评论网址(不一定需要word cloud，但如果提供也很好)
          </li>
          <li>
           从第三行开始的所有内容都是评论文本的内容
          </li>
         </ul>
         <p>
          下面的 Jupyter Notebook 包含模板代码：
         </p>
         <ul>
          <li>
           创建一个空列表，* df_list *，并附加字典。这个字典列表最终将被转换为 pandas DataFrame(这是
           <a href="https://stackoverflow.com/a/28058264" target="_blank">
            逐行构建 DataFrame 的最有效方式
           </a>
           )。
          </li>
          <li>
           在* ebert_reviews *文件夹中循环遍历每部电影的 Roger Ebert 影评文本文件。
          </li>
          <li>
           使用
           <a href="https://docs.python.org/3/library/glob.html" target="_blank">
            glob
           </a>
           生成的路径打开每个文本文件，并将其传达到名为 * file * 的文件句柄中。
          </li>
          <li>
           通过使用
           <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html" target="_blank">
            <code>
             pd.DataFrame
            </code>
            构造函数
           </a>
           转换
           <em>
            df_list
           </em>
           来创建名为
           <em>
            df
           </em>
           的 DataFrame。
          </li>
         </ul>
         <p>
          你的任务是提取电影标题、Roger Ebert 影评网址和每个文本文件中的评论，并每三个一组将它们作为字典附加到
          <em>
           df_list
          </em>
          。
         </p>
         <p>
          这个任务需要的文件方法是：
         </p>
         <ul>
          <li>
           <code>
            readline()
           </code>
          </li>
          <li>
           <code>
            read()
           </code>
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div class="jumbotron">
         <h3>
          Workspace
         </h3>
         <p class="lead">
          This section contains either a workspace (it can be a
          <a href="http://jupyter.org/" target="_blank">
           Jupyter
      Notebook
          </a>
          workspace or an online code editor work space, etc.) and it cannot be automatically downloaded to be
    generated here. Please access the classroom with your account and manually download the workspace to your local
    machine. Note that for some courses, Udacity upload the workspace files onto
          <a href="https://github.com/udacity" target="_blank">
           https://github.com/udacity
          </a>
          , so you may be able to download them there.
         </p>
         <h4>
          Workspace Information:
         </h4>
         <ul>
          <li>
           <strong>
            Default file path:
           </strong>
          </li>
          <li>
           <strong>
            Workspace type:
           </strong>
           jupyter
          </li>
          <li>
           <strong>
            Opened files (when workspace is loaded):
           </strong>
           n/a
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="以上文件的翻译">
          以上文件的翻译
         </h3>
         <pre><code>import glob
import pandas as pd</code></pre>
         <pre><code># 字典列表可以逐个创建文件，随后转化为一个 DataFrame
df_list = []
for ebert_review in glob.glob('ebert_reviews/*.txt'):
    with open(ebert_review, encoding='utf-8') as file:
        title = file.readline()[:-1]
        # 这里是你的代码

        # 添加到字典列表中
        df_list.append({'title': title,
                        'review_url': review_url,
                        'review_text': review_text})
df = pd.DataFrame(df_list, columns = ['title', 'review_url', 'review_text'])</code></pre>
         <h3 id="解答测试">
          解答测试
         </h3>
         <p>
          运行下列网格，查看你的解答是否正确。如果得到 AssertionError ，你的答案不正确。如果没有出现错误，你的答案是正确的。
         </p>
         <pre><code>df_solution = pd.read_pickle('df_solution.pkl')
pd.testing.assert_frame_equal(df, df_solution)</code></pre>
         <p>
          备注：文件收集方式是正确的，提示错误的是两个文件的索引值不一致。如果提示报错，可以先继续学习下面的内容。
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="解决方案">
          解决方案
         </h2>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Python 中的文本文件 2
         </p>
        </h3>
        <video controls="">
         <source src="14. Python 中的文本文件 2-9YPOlROXNZM.mp4" type="video/mp4"/>
         <track default="false" kind="subtitles" label="zh-CN" src="14. Python 中的文本文件 2-9YPOlROXNZM.zh-CN.vtt" srclang="zh-CN"/>
         <track default="true" kind="subtitles" label="en" src="14. Python 中的文本文件 2-9YPOlROXNZM.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="pt-BR" src="14. Python 中的文本文件 2-9YPOlROXNZM.pt-BR.vtt" srclang="pt-BR"/>
         <track default="false" kind="subtitles" label="ar" src="14. Python 中的文本文件 2-9YPOlROXNZM.ar.vtt" srclang="ar"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h3 id="更多信息">
          更多信息
         </h3>
         <ul>
          <li>
           <a href="https://stackoverflow.com/a/22288895" target="_blank">
            Stack Overflow：在 Python 中打开文件的最佳方法
           </a>
          </li>
          <li>
           <a href="https://stackoverflow.com/a/8010133" target="_blank">
            Stack Overflow：准确且完全 Pythonic 化的文件读取方式
           </a>
          </li>
          <li>
           <a href="https://stackoverflow.com/a/16994568" target="_blank">
            Stack Overflow：迭代与迭代器
           </a>
          </li>
          <li>
           <a href="https://en.wikipedia.org/wiki/Glob_(programming" target="_blank">
            Wikipedia：Glob 编程
           </a>
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="15. 资料来源：API(应用程序编程接口).html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('14. Python 中的文本文件')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
