WEBVTT
Kind: captions
Language: zh-CN

00:00:00.250 --> 00:00:02.660
让我们来终结这些愚蠢的垃圾

00:00:02.660 --> 00:00:05.540
我们需要确保在 content 列的数据

00:00:05.540 --> 00:00:09.050
永远都被当成文本 而不是 JavaScript 代码

00:00:10.110 --> 00:00:12.770
实际上 有一个很好用的 Python 库

00:00:12.770 --> 00:00:14.740
来实现这个 叫做 bleach

00:00:14.740 --> 00:00:18.690
它已经在你的虚拟机里安装好了 你可以直接在代码中导入它

00:00:18.690 --> 00:00:20.910
读一下 bleach 的文档

00:00:20.910 --> 00:00:23.160
在指导手册里有链接

00:00:23.160 --> 00:00:27.120
看完你就可以使用 bleach 来终结不安全的 HTML

00:00:27.120 --> 00:00:30.480
避免攻击者通过你的数据库给用户造成困扰

00:00:30.480 --> 00:00:32.610
快开始修复论坛的代码吧

00:00:32.610 --> 00:00:36.090
你还要考虑一件事 那就是 你认为

00:00:36.090 --> 00:00:40.720
是应该在储存垃圾信息之前就清理掉它们

00:00:40.720 --> 00:00:43.470
还是应该先把用户发来的所有内容都存好

00:00:43.470 --> 00:00:46.520
然后再在显示这些帖子之前清理掉垃圾信息呢？

