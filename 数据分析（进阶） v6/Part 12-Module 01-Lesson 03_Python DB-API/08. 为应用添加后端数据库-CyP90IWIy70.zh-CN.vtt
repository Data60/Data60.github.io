WEBVTT
Kind: captions
Language: zh-CN

00:00:00.430 --> 00:00:05.010
好的 我们现在用编辑器打开 forum.py

00:00:05.010 --> 00:00:11.630
在里面有一些 HTML 还有一些 web 服务器的代码在这

00:00:11.630 --> 00:00:14.560
回到最上面 我们看到还有一个 module

00:00:14.560 --> 00:00:16.659
叫做 forumdb 它是用来放数据库代码的

00:00:17.780 --> 00:00:20.510
我们来看一看 forumDB.py

00:00:20.510 --> 00:00:23.670
实际上我们发现这儿并没有数据库代码

00:00:23.670 --> 00:00:28.590
目前只是用一个 Python 的列表来存放帖子

00:00:28.590 --> 00:00:30.590
怪不得我们重启服务器的时候它们都消失了呢

00:00:31.720 --> 00:00:38.230
这个 AddPost 函数就是向数据库列表插入信息的

00:00:38.230 --> 00:00:44.290
这个 GetAllPosts 函数负责把数据库列表转换成一个字典型数据的列表

00:00:44.290 --> 00:00:46.700
字典内容的 Key 指向帖子的内容

00:00:47.910 --> 00:00:51.140
时间的 Key 就指向贴出的时间

00:00:51.140 --> 00:00:54.931
在 forum.py 中 仔细看一下 view 函数

00:00:54.931 --> 00:00:58.730
我们就能找到 forumdb.GetAllPosts 在这儿被调用

00:00:58.730 --> 00:01:03.470
然后在下面的 post 函数 就有 AddPost 被调用

00:01:03.470 --> 00:01:06.740
我们不需要向 forum.py 做任何改动

00:01:06.740 --> 00:01:10.190
因为所有与数据库打交道的工作都是 forum.db 做的

00:01:10.190 --> 00:01:13.870
所以我们只要在这儿改变数据库的代码

00:01:13.870 --> 00:01:16.210
就能真正地使用数据库啦

00:01:16.210 --> 00:01:18.180
这就是你要在下一页做的事

