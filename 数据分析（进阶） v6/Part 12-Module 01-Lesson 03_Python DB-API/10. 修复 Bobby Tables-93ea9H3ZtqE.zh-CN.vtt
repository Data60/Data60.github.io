WEBVTT
Kind: captions
Language: zh-CN

00:00:00.160 --> 00:00:03.770
我们代码的问题在于 在把用户输入的内容放入数据库的请求语句中时

00:00:03.770 --> 00:00:05.270
采用了不安全的方式

00:00:05.270 --> 00:00:08.020
某些帖子里的文字被当成了

00:00:08.020 --> 00:00:09.890
SQL 代码 而不是单纯的文本值

00:00:11.510 --> 00:00:14.320
我们还有另一种方法 可以让我们做出安全的请求语句

00:00:14.320 --> 00:00:18.940
当我们执行请求语句时 我们在语句文本中用 %s 通配符

00:00:18.940 --> 00:00:22.460
之后 用一个元组参数来执行这个调用

00:00:22.460 --> 00:00:26.340
数据库会将其替换进请求语句

00:00:26.340 --> 00:00:28.830
它会使用一种安全的方法 来避免这种问题再次发生

00:00:29.860 --> 00:00:33.550
利用你刚刚学到的 就可以更新 forumdb.py

00:00:33.550 --> 00:00:37.010
来利用请求变量安全地执行插入请求

00:00:37.010 --> 00:00:39.940
要测试你的结果 可以发一条帖子试验

00:00:39.940 --> 00:00:40.950
把单引号放进去

00:00:40.950 --> 00:00:45.140
也可以做 SQL 注入攻击 这次就不会把论坛都删完了

00:00:45.140 --> 00:00:48.660
完成任务后 点击提交和继续

