<!-- udacimak v1.3.0 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   有关地形数据的GaussianNB 部署
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      朴素贝叶斯
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Google 无人驾驶汽车中的机器学习.html">
       01. Google 无人驾驶汽车中的机器学习
      </a>
     </li>
     <li class="">
      <a href="02. acerous 还是 non-acerous？.html">
       02. acerous 还是 non-acerous？
      </a>
     </li>
     <li class="">
      <a href="03. 监督分类示例.html">
       03. 监督分类示例
      </a>
     </li>
     <li class="">
      <a href="04. 特征和标签音乐示例.html">
       04. 特征和标签音乐示例
      </a>
     </li>
     <li class="">
      <a href="05. 特征可视化.html">
       05. 特征可视化
      </a>
     </li>
     <li class="">
      <a href="06. 肉眼分类.html">
       06. 肉眼分类
      </a>
     </li>
     <li class="">
      <a href="07. Stanley 地形分类简介.html">
       07. Stanley 地形分类简介
      </a>
     </li>
     <li class="">
      <a href="08. 散点图：坡度和颠簸度.html">
       08. 散点图：坡度和颠簸度
      </a>
     </li>
     <li class="">
      <a href="09. 散点图 2.html">
       09. 散点图 2
      </a>
     </li>
     <li class="">
      <a href="10. 散点图 3.html">
       10. 散点图 3
      </a>
     </li>
     <li class="">
      <a href="11. 从散点图到预测.html">
       11. 从散点图到预测
      </a>
     </li>
     <li class="">
      <a href="12. 从散点图到预测 2.html">
       12. 从散点图到预测 2
      </a>
     </li>
     <li class="">
      <a href="13. 从散点图到决策面.html">
       13. 从散点图到决策面
      </a>
     </li>
     <li class="">
      <a href="14. 良好的线性决策面.html">
       14. 良好的线性决策面
      </a>
     </li>
     <li class="">
      <a href="15. 开始学习朴素贝叶斯.html">
       15. 开始学习朴素贝叶斯
      </a>
     </li>
     <li class="">
      <a href="16. 代码获取决策边界演示.html">
       16. 代码获取决策边界演示
      </a>
     </li>
     <li class="">
      <a href="17. sklearn 使用入门.html">
       17. sklearn 使用入门
      </a>
     </li>
     <li class="">
      <a href="18. GaussianNB使用示例.html">
       18. GaussianNB使用示例
      </a>
     </li>
     <li class="">
      <a href="19. 有关地形数据的GaussianNB 部署.html">
       19. 有关地形数据的GaussianNB 部署
      </a>
     </li>
     <li class="">
      <a href="20. 计算 GaussianNB 准确性.html">
       20. 计算 GaussianNB 准确性
      </a>
     </li>
     <li class="">
      <a href="21. 训练数据和测试数据.html">
       21. 训练数据和测试数据
      </a>
     </li>
     <li class="">
      <a href="22. 贝叶斯规则 --- 深入解析朴素贝叶斯算法.html">
       22. 贝叶斯规则 --- 深入解析朴素贝叶斯算法
      </a>
     </li>
     <li class="">
      <a href="23. 贝叶斯规则.html">
       23. 贝叶斯规则
      </a>
     </li>
     <li class="">
      <a href="24. 癌症测试.html">
       24. 癌症测试
      </a>
     </li>
     <li class="">
      <a href="25. 先验和后验.html">
       25. 先验和后验
      </a>
     </li>
     <li class="">
      <a href="26. 规范化 1.html">
       26. 规范化 1
      </a>
     </li>
     <li class="">
      <a href="27. 规范化 2.html">
       27. 规范化 2
      </a>
     </li>
     <li class="">
      <a href="28. 规范化 3.html">
       28. 规范化 3
      </a>
     </li>
     <li class="">
      <a href="29. 全概率.html">
       29. 全概率
      </a>
     </li>
     <li class="">
      <a href="30. 贝叶斯规则图.html">
       30. 贝叶斯规则图
      </a>
     </li>
     <li class="">
      <a href="31. 用于分类的贝叶斯规则.html">
       31. 用于分类的贝叶斯规则
      </a>
     </li>
     <li class="">
      <a href="32. Chris 或 Sara.html">
       32. Chris 或 Sara
      </a>
     </li>
     <li class="">
      <a href="33. 后验概率.html">
       33. 后验概率
      </a>
     </li>
     <li class="">
      <a href="34. 你独自得出的贝叶斯概率.html">
       34. 你独自得出的贝叶斯概率
      </a>
     </li>
     <li class="">
      <a href="35. 为何朴素贝叶斯很朴素.html">
       35. 为何朴素贝叶斯很朴素
      </a>
     </li>
     <li class="">
      <a href="36. 朴素贝叶斯的优势和劣势.html">
       36. 朴素贝叶斯的优势和劣势
      </a>
     </li>
     <li class="">
      <a href="37. 恭喜你学完了朴素贝叶斯.html">
       37. 恭喜你学完了朴素贝叶斯
      </a>
     </li>
     <li class="">
      <a href="38. 朴素贝叶斯迷你项目.html">
       38. 朴素贝叶斯迷你项目
      </a>
     </li>
     <li class="">
      <a href="39. 迷你项目简介.html">
       39. 迷你项目简介
      </a>
     </li>
     <li class="">
      <a href="40. 针对作者身份的机器学习.html">
       40. 针对作者身份的机器学习
      </a>
     </li>
     <li class="">
      <a href="41. 设置代码.html">
       41. 设置代码
      </a>
     </li>
     <li class="">
      <a href="42. 作者身份准确率.html">
       42. 作者身份准确率
      </a>
     </li>
     <li class="">
      <a href="43. 对 NB 分类器计时.html">
       43. 对 NB 分类器计时
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          19. 有关地形数据的GaussianNB 部署
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          有关地形数据的高斯 NB 部署
         </p>
        </h3>
        <div>
         <div>
          <h4>
           Question:
          </h4>
          <video controls="">
           <source src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.mp4" type="video/mp4"/>
           <track default="true" kind="subtitles" label="en" src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.en.vtt" srclang="en"/>
           <track default="false" kind="subtitles" label="ar" src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.ar.vtt" srclang="ar"/>
           <track default="false" kind="subtitles" label="zh-CN" src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.zh-CN.vtt" srclang="zh-CN"/>
           <track default="false" kind="subtitles" label="pt-BR" src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.pt-BR.vtt" srclang="pt-BR"/>
           <track default="false" kind="subtitles" label="ja" src="19. 有关地形数据的高斯 NB 部署-VBs6D4ggnYY.ja.vtt" srclang="ja"/>
          </video>
         </div>
         <h4>
          Start Quiz:
         </h4>
         <div>
          <div class="nav nav-tabs nav-fill" id="question-tabs" role="tablist">
           <a aria-controls="150998-studentMain-py" aria-selected="true" class="nav-item nav-link active show" data-toggle="tab" href="#150998-studentMain-py" id="tab-150998-studentMain-py" role="tab">
            studentMain.py
           </a>
           <a aria-controls="150998-class_vis-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#150998-class_vis-py" id="tab-150998-class_vis-py" role="tab">
            class_vis.py
           </a>
           <a aria-controls="150998-prep_terrain_data-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#150998-prep_terrain_data-py" id="tab-150998-prep_terrain_data-py" role="tab">
            prep_terrain_data.py
           </a>
           <a aria-controls="150998-ClassifyNB-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#150998-ClassifyNB-py" id="tab-150998-ClassifyNB-py" role="tab">
            ClassifyNB.py
           </a>
          </div>
          <div class="tab-content" id="question-tab-contents" style="padding: 20px 0;">
           <div aria-labelledby="tab-150998-studentMain-py" class="tab-pane active show" id="150998-studentMain-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python

""" Complete the code in ClassifyNB.py with the sklearn
    Naive Bayes classifier to classify the terrain data.
    
    The objective of this exercise is to recreate the decision 
    boundary found in the lesson video, and make a plot that
    visually shows the decision boundary """


from prep_terrain_data import makeTerrainData
from class_vis import prettyPicture, output_image
from ClassifyNB import classify

import numpy as np
import pylab as pl


features_train, labels_train, features_test, labels_test = makeTerrainData()

### the training data (features_train, labels_train) have both "fast" and "slow" points mixed
### in together--separate them so we can give them different colors in the scatterplot,
### and visually identify them
grade_fast = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==0]
bumpy_fast = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==0]
grade_slow = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==1]
bumpy_slow = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==1]


# You will need to complete this function imported from the ClassifyNB script.
# Be sure to change to that code tab to complete this quiz.
clf = classify(features_train, labels_train)



### draw the decision boundary with the text points overlaid
prettyPicture(clf, features_test, labels_test)
output_image("test.png", "png", open("test.png", "rb").read())




</pre>
           </div>
           <div aria-labelledby="tab-150998-class_vis-py" class="tab-pane" id="150998-class_vis-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python

#from udacityplots import *
import warnings
warnings.filterwarnings("ignore")

import matplotlib 
matplotlib.use('agg')

import matplotlib.pyplot as plt
import pylab as pl
import numpy as np

#import numpy as np
#import matplotlib.pyplot as plt
#plt.ioff()

def prettyPicture(clf, X_test, y_test):
    x_min = 0.0; x_max = 1.0
    y_min = 0.0; y_max = 1.0

    # Plot the decision boundary. For that, we will assign a color to each
    # point in the mesh [x_min, m_max]x[y_min, y_max].
    h = .01  # step size in the mesh
    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))
    Z = clf.predict(np.c_[xx.ravel(), yy.ravel()])

    # Put the result into a color plot
    Z = Z.reshape(xx.shape)
    plt.xlim(xx.min(), xx.max())
    plt.ylim(yy.min(), yy.max())

    plt.pcolormesh(xx, yy, Z, cmap=pl.cm.seismic)

    # Plot also the test points
    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

    plt.scatter(grade_sig, bumpy_sig, color = "b", label="fast")
    plt.scatter(grade_bkg, bumpy_bkg, color = "r", label="slow")
    plt.legend()
    plt.xlabel("bumpiness")
    plt.ylabel("grade")

    plt.savefig("test.png")
    
import base64
import json
import subprocess

def output_image(name, format, bytes):
    image_start = "BEGIN_IMAGE_f9825uweof8jw9fj4r8"
    image_end = "END_IMAGE_0238jfw08fjsiufhw8frs"
    data = {}
    data['name'] = name
    data['format'] = format
    data['bytes'] = base64.encodestring(bytes)
    print image_start+json.dumps(data)+image_end</pre>
           </div>
           <div aria-labelledby="tab-150998-prep_terrain_data-py" class="tab-pane" id="150998-prep_terrain_data-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python
import random


def makeTerrainData(n_points=1000):
###############################################################################
### make the toy dataset
    random.seed(42)
    grade = [random.random() for ii in range(0,n_points)]
    bumpy = [random.random() for ii in range(0,n_points)]
    error = [random.random() for ii in range(0,n_points)]
    y = [round(grade[ii]*bumpy[ii]+0.3+0.1*error[ii]) for ii in range(0,n_points)]
    for ii in range(0, len(y)):
        if grade[ii]&gt;0.8 or bumpy[ii]&gt;0.8:
            y[ii] = 1.0

### split into train/test sets
    X = [[gg, ss] for gg, ss in zip(grade, bumpy)]
    split = int(0.75*n_points)
    X_train = X[0:split]
    X_test  = X[split:]
    y_train = y[0:split]
    y_test  = y[split:]

    grade_sig = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==0]
    bumpy_sig = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==0]
    grade_bkg = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==1]
    bumpy_bkg = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==1]

#    training_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
#            , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}


    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

    test_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
            , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}

    return X_train, y_train, X_test, y_test
#    return training_data, test_data</pre>
           </div>
           <div aria-labelledby="tab-150998-ClassifyNB-py" class="tab-pane" id="150998-ClassifyNB-py" role="tabpanel">
            <pre><code></code>def classify(features_train, labels_train):   
    ### import the sklearn module for GaussianNB
    ### create classifier
    ### fit the classifier on the training features and labels
    ### return the fit classifier
    
    
    ### your code goes here!
    
    </pre>
           </div>
          </div>
         </div>
         <div>
          <details>
           <summary>
            <strong>
             Solution:
            </strong>
           </summary>
           <div>
            <video controls="">
             <source src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.mp4" type="video/mp4"/>
             <track default="false" kind="subtitles" label="ar" src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.ar.vtt" srclang="ar"/>
             <track default="false" kind="subtitles" label="zh-CN" src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.zh-CN.vtt" srclang="zh-CN"/>
             <track default="true" kind="subtitles" label="en" src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.en.vtt" srclang="en"/>
             <track default="false" kind="subtitles" label="pt-BR" src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.pt-BR.vtt" srclang="pt-BR"/>
             <track default="false" kind="subtitles" label="ja" src="19. 有关地形数据的高斯 NB 部署-TcSnd3_hAy8.ja.vtt" srclang="ja"/>
            </video>
           </div>
          </details>
         </div>
        </div>
        <div class="jumbotron" style="margin-top: 50px; margin-bottom: 50px;">
         <h3>
          INSTRUCTOR NOTE:
         </h3>
         <p>
          在紧跟着的测试题中：
         </p>
         <p>
          <code>
           pred = clf.predict(features_test)
          </code>
         </p>
         <p>
          这一行并不是绘制决策边界所必需的，至少在我们编写的代码中是这样。
         </p>
         <p>
          不过，创建分类器的重点是你可以使用它进行预测，因此请务必记住这一点，因为你将会在后面的测试题中用到它。
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="20. 计算 GaussianNB 准确性.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('19. 有关地形数据的GaussianNB 部署')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
